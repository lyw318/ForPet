<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="member">
 


<!-- <update id="userAuth">
	<![CDATA[update user set userCertification = 1 where (select count(*) from userAuth where memberEmail = #{memberEmail}) > 0]]>
</update> -->
 
 <select id="selectOne" parameterType="member" resultType="member">
 SELECT * FROM MEMBER WHERE MEMBEREMAIL=#{memberEmail}
 </select>
 
 <select id="selectByNickname" parameterType="member" resultType="member">
 select * from member where memberNickname=#{memberNickname}
 </select>
 
 <insert id="insertMember" parameterType="member">
 INSERT INTO MEMBER VALUES(memberSeq.nextval,#{memberEmail},#{memberPassword},#{memberNickname},#{memberName},#{memberPhone},#{memberAddress},null,sysdate,null)
 <selectKey keyProperty="memberSeq" resultType="_int" order="AFTER">
 select memberSeq.currval from dual
 </selectKey>
 </insert>
 
 <!-- 메일인증 -->
 <insert id="insertUserAuth" parameterType="map">
 insert into userAuth values(#{memberEmail}, #{authKey})
 </insert>
 
 <update id="updateUserAuth">
 update userAuth set authKey=#{authKey} where memberEmail=#{memberEmail}
 </update>
 
 <select id="selectCountUserAuth" parameterType="string" resultType="string">
 select authKey from userAuth where memberEmail=#{memberEmail}
 </select>
 
 <update id="update"  parameterType="member">
 update member set memberPassword=#{memberPassword},memberNickname=#{memberNickname},memberName=#{memberName},memberPhone=#{memberPhone},memberAddress=#{memberAddress} where memberEmail=#{memberEmail}
 </update>

<delete id="delete"  parameterType="member">
delete from member where memberEmail=#{memberEmail}
</delete>

<select id="selectKakao" parameterType="String" resultType="map">
select * from kakaoMember join member using (memberSeq) where kakaoId=#{value}
</select>

</mapper>
